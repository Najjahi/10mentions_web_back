<!DOCTYPE html>
<html lang="fr">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- lien css -->
<link rel="stylesheet" href="assets/css/style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<!-- googlefont -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&display=swap" rel="stylesheet">
<title> Clause_sql</title>
</head>

<body>
<header>
<nav class="navbar navbar-expand-sm navbar-light bg-light  border-bottom border-dark">
<div class="container-fluid">
     <a class="navbar-brand" href="#"><img src="assets/img/logo.png" alt="logo"></a>
     <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse"
          data-bs-target="#collapsibleNavId" aria-controls="collapsibleNavId" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
     </button>
     <div class="collapse navbar-collapse" id="collapsibleNavId">
          <ul class="navbar-nav me-auto mt-2 mt-lg-0">
               <li class="nav-item">
                    <a class="nav-link" href="index.html">Acronyme</a>
               </li>
               <li class="nav-item">
                    <a class="nav-link" href="cours.html">cours</a>
               </li>
               <li class="nav-item">
                    <a class="nav-link" href="clause_sql.html">Les clauses SQL</a>
               </li>
               <li class="nav-item">
                    <a class="nav-link" href="pratique_sql.html">Pratique SQL</a>
               </li>
          </ul>
     </div>
</div>
</nav>
</header>
<div class="container">
<main>
<!-- .row.border.border-dark.p-5 -->
<div class="row border border-dark p-5">
     <div class="col-sm-12">
          <h2 class="text-center"> 1- Les requêtes de base</h2>
          <hr>
     </div>
     <div class="col-sm-12 d-flex justify-content-center mt-5 >">
          <ul>
               <li> Créeer une BDD : <strong> <code> CREATE DATABASE IF NOT EXIST nomBdd </code></strong>
               </li>
               <li> Supprimer une BDD : <strong> <code> DROP DATABASE IF EXISTS nomBdd </code></strong>
               </li>
               <li> Observer la description d'une table : <strong> <code> DESC nomTable </code></strong>
               </li>
               <li> Voir les BDD dans le serveur : <strong> <code> SHOW DATABASES </code></strong></li>
               <li>Rajouter un champs dans une table existance : 
               <strong>
                     <code> 
                         ALTER TABLE nom_de_table ADD nom_nouvelle_colonne VARCHAR(255) AFTER nom_colonne_existante
                    </code>
               </strong>
          </li>
          </ul>
     </div>
</div>
<div class="col-sm-12">
     <h2 class="text-center"> 2- Tables et colonnes</h2>
     <hr>
</div>
<div class="col-sm-12 d-flex justify-content-center mt-5 >">
     <ul>
          <li> Créeer une BDD 'entreprise': <strong> <code>
CREATE DATABASE IF NOT EXISTS entreprise  </code></strong></li>
          <li>Creer une table dans la base de donnée entreprise : <strong> <code>
<pre>
     CREATE TABLE IF NOT EXISTS employes ( 
     id_employe INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT, 
     prenom VARCHAR(20) NULL, 
     nom VARCHAR(20) NULL, 
     sexe ENUM ('f', 'm') NOT NULL, 
     service VARCHAR(39) NULL, 
     date_embauche DATE NULL, 
     salaire FLOAT NULL 
     )  
</pre>
</code>
               </strong>
          </li>
          <li> Insérer les donneées dans une table :
               <pre>
<strong>                   
          <code> INSERT INTO employes (id_employe, prenom, nom, sexe, service, date_embauche, salaire) 
          VALUES
                    (381, 'Imane', 'NAJJAHI', 'f', 'comptabilité', '2023-06-18', 3000),
                    (400, 'Spartak', 'SMBATYAN', 'm', 'informatique', '2022-05-30', 3200),
                    (450, 'Semir', 'SARAJLIC', 'm', 'juridique', '2022-09-18', 5000),
                    (510, 'Kaïss', 'BADI', 'm', 'contrôle', '2024-05-18', 2000),
                    (550, 'Adama', 'CISSOKO', 'm', 'commercial', '2023-09-18', 2500),
                    (600, 'Fabien', 'POTTIER', 'm', 'juridique', '2022-09-28', 5000),
                    (700, 'Gary', 'MONTEIRO', 'm', 'informatique', '2022-05-28', 3300),
                    (710, 'Axel', 'GRANSART', 'm', 'comptabilité', '2023-03-04', 5000),
                    (810, 'Cleid', 'MANIGAT', 'm', 'contrôle', '2021-06-01', 2100),
                    (910, 'Leïla', 'EMBARK', 'f', 'secretariat', '2023-06-16', 2000),
                    (950, 'Maureene', 'MAROLANY', 'f', 'secretariat', '2021-06-01', 2000),
                    (980, 'Océane', 'FOMEKOUONG', 'f', 'direction', '2023-06-16', 4000)
                    ( 981, 'Venoth', 'RAJASEKARAN', 'm', 'commercial', '2022-10-15', 4000)
          </code>
     </strong>
</pre>
          </li>
          <li>
               Syntaxe alternative : ne permet pas d'insérer plusieurs séries de valeurs en une seule
               requête, contrairement à la syntaxe de base (au dessus)
               <pre>
<strong> 
<code>
     INSERT INTO employes SET id_employes = 900, prenom = 'Sahar', nom = 'FERCHICHI'
     sexe = 'f', service = 'direction', date_embauche = '2022-06-06', salaire = 7000 
     </code>
</strong>
</pre>
          </li>
          <li> Effacer une table : <strong> <code> DROP Table 

</code>
               </strong>
          </li>

     </ul>
</div>


<div class="row border border-dark p-5">
     <div class="col-sm-12">
          <h2 class="text-center"> 3 - SELECT et DISTINCT</h2>
          <hr>
     </div>
     <div class="col-sm-12 col-md-6 mt-5 >">
          <ul>
               <li> Pour voir tout le contenu d'une table :
                    <strong><code> SELECT * FROM employes</code></strong> (* = tout = all)
               </li>
               <li class="alert alert-success"> Selectionner les valeurs de deux champs d'une table :
                    SELECT colonne1, colonne2 FROM nomtable <br>
                    <strong>
                         <code>
     -> SELECT prenom, nom FROM employes : 
     -> SELECT prenom, service, date_embauche FROM employes : 

</code>
                    </strong>
               </li>
               <li class="alert alert-success"> Afficher les données d'une table sans doublons : SELECT
                    DISTINCT colonne FROM nomTable <br>

                    <strong><code> -> SELECT DISTINCT service FROM employes :  </code></strong>
               </li>
               <li class="alert alert-success"> Effaçer un enregistrement : DELETE FROM nomTable WHERE
                    colonne =" " <br>

                    <strong><code> -> DELETE FROM employes WHERE nom = 'Salimata'  </code></strong>
               </li>
          </ul>
     </div>

     <div class="col-sm-12 col-md-6 mt-5">
          <p class="alert alert-danger">
               Les requêtes ne sont pas sensibles à la casse mais une convention indique qu'il faut
               mettre les mots-clefs des requêtes en majuscules .C'est plus facile ainsi de s'y
               retrouver.
          </p>
     </div>
</div>
<div class="row border border-dark p-5">
     <div class="col-sm-12">
          <h2 class="text-center"> 4 - Les opérateurs de comparaison</h2>
          <hr>
     </div>
     <div class="col-sm-12 mt-5 text-center >">
          <!-- table.table.table-striped.table-hover>thead+tbody -->
          <table class="table table-striped table-hover">
               <thead>
                    <tr>
                         <th scope="col"> Opérateur </th>
                         <th scope="col"> Signification </th>
                    </tr>
               </thead>
               <tbody>
                    <!-- tr*6>th+td -->
                    <tr>
                         <th scope="row"> = </th>
                         <td> Est égle à</td>
                    </tr>
                    <tr>
                         <th scope="row"> &gt; </th>
                         <td> Strictement supérieur à </td>
                    </tr>
                    <tr>
                         <th scope="row"> &lt;</th>
                         <td> Strictement inférieur à</td>
                    </tr>
                    <tr>
                         <th scope="row"> &gt;= </th>
                         <td> supérieur ou égale à</td>
                    </tr>
                    <tr>
                         <th scope="row"> &lt;= </th>
                         <td> Inférieur ou égale à</td>
                    </tr>
                    <tr>
                         <th scope="row"> &lt; &gt; ou != </th>
                         <td> Est différent de</td>
                    </tr>
               </tbody>
          </table>
     </div>
</div>
<div class="row border border-dark p-5">
     <div class="col-sm-12">
          <h2 class="text-center"> 5 - Creer un ALIAS avec AS</h2>
          <hr>
     </div>
     <div class="col-sm-12 mt-5 ">
          <p> Nous creons un ALIAS pour renomer temporairement une colonne ou une table dans une requete.
               Cette astuce est particuliérement utile pour utiliser la lecture des requetes
          </p>
          <ul>
               <li> SELECT colonne1, colonne2, colonne3 FROM nomTable</li>
               <li>
                    <strong><code>
                         -> SELECT nom, prenom AS firstName FROM employes
                    </code></strong>
               </li>
               <li>
                    <strong><code>
                         -> SELECT nom, prenom, salaire*12 AS salaireAnnuel FROM employes
                    </code></strong>
               </li>
          </ul>
     </div>
</div>
<div class="row border border-dark p-5">
     <div class="col-sm-12">
          <h2 class="text-center"> 6 - Les conditions et les conditions multiples</h2>
          <hr>
     </div>
     <div class="col-sm-12 mt-5 ">
          <h6 class="text-center"> Le mot clef <em> WHERE</em> (à condition que) </h6>
          <ul>
               <li class="alert alert-success"> Nous cherchons avec une condition une partie des données :                    :
                    <code> SELECT colonne, colonne FROM table WHERE colonne = "donnée</code>
               </li>
               <li>Ici, nous cherchons à afficher les personnes dont le sex est masculin :
                    <strong><code> SELECT nom, prenom, sexe FROM employes WHERE sexe = 'm' </code>
                    </strong>

               <li> Trouver la personne qui gagne 7000 </li>
               <strong>
                    <code> SELECT nom, prenom, salaire FROM employes WHERE salaire = 7000  </code>
               </strong>
               </li>
          </ul>
     </div>
     <div class="col-sm-12 mt-5 ">
          <h6 class="text-center"> Le mot clef <em> WHERE</em> (à condition que) </h6>
          <ul>
               <li class="alert alert-success"> Nous cherchons avec une condition une partie des données :                    :
                    <code> SELECT colonne, colonne FROM table WHERE colonne = "donnée</code>
               </li>
               <li>Ici, nous cherchons à afficher les personnes dont le sex est masculin :
                    <strong><code> SELECT nom, prenom, sexe FROM table WHERE sexe = 'm' </code> </strong>

                    <strong><code> SELECT nom, prenom, sexe FROM employes WHERE sexe = 'm' </code>
                    </strong>

               <li> Trouver la personne qui gagne 7000 </li>
               <strong>
                    <code> SELECT nom, prenom, salaire FROM employes WHERE salaire = 7000                                              
                         </code>
               </strong>
               </li>
          </ul>
     </div>
<div class="row border border-dark p-5">
     <div class="col-sm-12">
          <h2 class="text-center"> 6 - Les conditions et les conditions multiples</h2>
          <hr>
     </div>
     <div class="col-sm-12 mt-5 ">
          <h6 class="text-center"> Le mot clef <em> WHERE</em> (à condition que) </h6>
          <ul>
               <li class="alert alert-success">Nous cherchons avec une condition une partie des données:
                    <code> SELECT colonne, colonne FROM table WHERE colonne = "donnée</code>
               </li>
               <li>Ici, nous cherchons à afficher les personnes dont le sex est masculin :
                    <strong><code> SELECT nom, prenom, sexe FROM table WHERE sexe = 'm' </code> </strong>
                    -> SELECT nom, prenom, sexe FROM employes WHERE sexe = 'm'
                    
               <li> Trouver la personne qui gagne 7000 </li>
               <strong>
               <code> SELECT nom, prenom, salaire FROM employes WHERE salaire = 7000
                    </code>                                       
               </strong>

               </li>
          </div>
               <div class="col-sm-12 mt-5 ">
                    <h6 class="text-center"> Le mot clef <em> WHERE</em> avec différents champs,
                         différentes valeurs et AND </h6>
                    <ul>
                         <li class="alert alert-success"> Nous cherchons l'employé qui gagne 5000
                              euros et dont le service est comptabilité :
                              <strong> 
                                   <code> 
                              
                              -> SELECT nom FROM employés WHERE salaite = 5000 AND service = 'comptabilité'
                         </code>
                    </strong>
                    </li>
               </div>
                    <div class="col-sm-12 mt-5 ">
                    <h6 class="text-center"> Le mot clef <em> WHERE</em> avec différents champs, différentes valeurs et OR</h6>
<ul>
     <li class="alert alert-success"> Nous cherchons les employes qui
          gagnent un salaire qui est égale à 5000 euros et inferieur ou
          égale à 2000 euros.
     </li>
     <strong>
          <code> -> SELECT prenom, nom, salaire FROM employes WHERE salaire = 5000 OR salaire &lt; = 2000;                                              
          </code>
     </strong>
     </li>
</div>
     <div class="col-sm-12 mt-5 ">
          <h6 class="text-center"> Le mot clef <em> WHERE</em> et l'ordre
               de priorité sur les conditions AND et OR </h6>
          <ul>
               <li class="alert alert-success"> Nous cherchons à afficher
                    les employés qui travaillent dans le service direction
                    et qui gagnent 4000 euros ou 7000 euros </li>
               <li>
                    <strong><code>
                         SELECT prenom, nom, salaire, service FROM employes WHERE AND salaire = 7000 OR salaire = 4000 AND service = 'direction'; 
                    </code></strong>

               </li>

               <li> Lorsqu'il y'a AND ou OR au sein de la même requête, le
                    systéme lit la condition de la requête de la droite
                    vers la gauche, Ainsi, il verra d'abord
                    <strong><code> salaire = 4000 OR salaire = 7000</code></strong>
                    puis le service demandé</li>
               <li>
                    Pour garantir l'ordre naturel de lecture (de la gauche
                    vers la droite), nous utiliserons des parenthéses :
               </li>
               <strong><code>
                    SELECT prenom, nom, salaire, service FROM employes WHERE (salaire = 7000 OR salaire = 4000) AND service = 'direction'; 
               </code></strong>

          </div>
               <div class="col-sm-12 mt-5 ">
                    <h6 class="text-center"> Le mot clef <em> WHERE</em>
                         avec <em> BETWEEN</em> <em>(entre) </em> </h6>
                    <ul>
                         <li class="alert alert-success"> Nous cherchons
                              avec une codition une partie des données <br>
                              SELECT * FROM nomTable WHERE colonne BETWEEN
                              donnée AND données
                         </li>

                         <li>
                              <strong><code>
                                   SELECT prenom, nom, salaire, service FROM employes WHERE AND salaire = 7000 OR salaire = 4000 AND service = 'direction'; 
                              </code></strong>
                         <li class="alert alert-success"> Nous cherchons à
                              afficher
                              le nombre de personnes embauchées entre 2021
                              et 2020
                         </li>
                         <strong><code>
                         SELECT nom, prenom, date_embauche FROM employes WHERE date_embauche BETWEEN '2021-01-01' AND '2023-01-01'
                         </code></strong>
                              </div>
                         <div class="col-sm-12 mt-5 ">
                              <h6 class="text-center"> Le mot clef <em>
                                        WHERE</em> avec <em> BETWEEN</em> avec   <em> LIKE</em> </h6>
                              <ul>
                              <li class="alert alert-success"> Afficher les employés dont le prenom commence par la lettre "s" : <br>                                                       
                                   <strong><code> 
                                             SELECT * FROM employes WHERE prenom LIKE 's%'
                                        </code></strong>
                                   </li>

                                   <li>
                                        Cette methode sera très utile dans un moteur de recherche 
                                   
                                   </li>
                                   <li> Dans cette ligne de code le pourcentage signifie que l'on recharche le "s" en debut du mot ainsi la suite de caractéres vien après le "s"</li>
                                   
                                   <li>
                                        Afficher les employes dont le prenom contient la lettre "s" 
                                   </li>
                                   <li>Avec la présence du purcentage avec et après le caractére recherché, nous demandons au systéme de trouver des enregistrements contenant l'expression recherchée </li>
                              </ul>
                         </div>
                         <div class="col-sm-12 mt-5 ">
                              <h6 class="text-center"> Le mot clef <em>
                                        WHERE</em> avec <em> BETWEEN</em> avec  <em> CURDATE</em> (date courante) </h6>
                              <ul>
                              <li class="alert alert-success"> C'est une fonction prédéfinie avec ses parenthéses  
                                   <li>
                                        Une requête donne ma date du serveur, la date du jour:
                                   </li>
                                   <strong><code>                                     
                                             SELECT * FROM CURDATE()
                                        </code></strong>
                                   </li>
                                   <li class="alert alert-danger"> Dans une BDD, les dates sont toujours au format états'unis en YYYY-MM-DD  
                                        <li>

                                   
                                   <li>
                                        Afficher les employes embauchés entre 2022 et aujourd'hui : 
                                   </li>
                                   <strong><code>
                                        -> SELECT * FROM employes WHERE date_embauche BETWEEN '2022-01-01' AND CURDATE();
                                   </code></strong>
                              </ul>
                         </div>

                         <div class="col-sm-12 mt-5 ">
                              <h6 class="text-center"> Le mot clef <em>
                                        WHERE</em> avec <em> WHERE</em> avec  <em> IN </em></h6>
                              <ul>
                              <li class="alert alert-success"> égale (=) permet d'annoncer une seule valeur tandis que IN permet d'annoncer plusieurs valeurs
                                   <li>
                                        Trouver les employés de la comptabilité et du service informatique
                                   
                                   <strong><code>                                     
                                        SELECT * FROM employes WHERE service IN ('comptabilité','informatique'); 
                                        </code></strong>
                                   </li>
                                   <li> Différent (!=) permet d'exclute une seule valeur, NOT IN permet d'exculre plusieurs valeurs </li>
                                   <li>trouver les employes qui ne sont pas au service comptabilité et informatique</li>
                                   <strong><code>
                                        -> SELECT nom, prenom, service FROM employes WHERE service NOT IN  ('comptabilité','informatique');
                                   </code></strong>
                              </ul>
                         </div>
                    </div>
               <div class="row border border-dark p-5">
                    <div class="col-sm-12">
                         <h2 class="text-center"> 7 - Classement avec ORDER BY </h2>
                         <hr>
                         <ul>
                         <li>
                              grâce à <em> ORDER BY </em> on va classer les données par ordre alphabetique
                         </li>
                         <li>
                              On range les nom par order alphabetique
                              <strong> <code>
                                   SELECT prenom, nom FROM employes ORDER BY nom DESC
                              </code></strong>
                         </li>
                         <li> 
                              Fonctionnne pour les STRING comme pour les nombres :
                         </li>
                         <li>
                              Ranger les salariés par salaire par ordre croissant

                              -> SELECT prenom, nom, salaire FROM employes ORDER BY salaire DESC;

                         </li>
                         <li> ORDER BY permet de trier sur plusieurs colonnes 'tri multiple' :
                         <strong>
                         <code>
                              SELECT nom, prenom, service, salaire FROM employes ORDER BY service ASC, salaire DESC
                         </code>
                    </strong>
               </li>
               </ul>
                    </div>
               </div>
                    <div class="row border border-dark p-5">
                         <div class="col-sm-12">
                              <h2 class="text-center"> 8 - Limiter les résultats avec le mot clé <em> LIMIT</em> </h2>
                              <hr>
                              <ul>
                                   <li>Afficher les employes en les classant par salaire (du plus grand au plus petit) et en limitant le résultat à 3 :
                                        <strong>
                                             <code>
                                                  SELECT * FROM employes ORDER BY salaire DESC LIMIT 5,3 ;
                                             </code>
                                        </strong>
                                   </li>
                                   <li class="alert alert-danger">
                                        Le premier chiffre précise l'enregistrement de départ : 0 qui définit le premier enregistrement informatique.
                                        Le second chiffre indique combien de résultat nous attendons 
                                   </li>
                              </ul>
                         </div>
                    </div>
                    <div class="row border border-dark p-5">
                         <div class="col-sm-12">
                              <h2 class="text-center"> 9 - Réaliser des calculs dans nos requêtes <em> LIMIT</em> </h2>
                              <hr>
                         </div>
                              <div class="col-sm-12 mt-5">
                                   <h6 class="text-center"> Calculer une somme avec <em> SUM ()</em> Et une moyenne avec <em>AVG</em></h6>
                         <ul>
                              <li> Calculer la somme des salaires à l'année de tous les employes
                                   <strong>
                                        <code>
                                             SELECT SUM (salaire*12) AS sommeSalaire FROM employes;
                                   </code>
                              </strong>
                               </li>
                              <li> Calculer le salaire mensuel moyen de tout les employes
                                   <strong><code>
                                        SELECT AVG (salaire) FROM employes;
                                   </code></strong>
                              </li>
                         </ul>
                               
                         </div>
                                   

                              
                              
                                   <div class="col-sm-12 mt-5">
                                        <h6 class="text-center"> Arrandir avec <em> ROUND()</em> Et une moyenne avec <em>AVG</em></h6>
                              <ul>
                                   <li> Grâce à <em>ROUND ()</em> On peut arrondir le resultat d'un calcul :
                                        <strong>
                                             <code>
                                                  SELECT ROUND(AVG(salaire)) FROM employes;
                                        </code>
                                   </strong>
                                    </li>
                                    <li class="alert alert-danger"> On peut cumuler deux notions comme dans l'exemple précédent avec ROUND() ET AVG(). Attention à la syntaxe et aux parenthéses</li>
                                   
                                   <div class="col-sm-12 mt-5">
                                        <h6 class="text-center"> Compter avec <em> COUNT()</em></h6>
                              <ul>
                                   <li> Grâce à <em> COUNT() </em> On peut compter les lignes dans notre table :
                                        <strong>
                                             <code>
                                                  SELECT COUNT(*) AS nbr_lignes FROM employes;
                                        </code>
                                   </strong>
                                    </li>
                                    <li> Compter et afficher le nombre d'employes de sex feminin dans la table
                                        <strong>
                                             <code>
                                                  SELECT COUNT(*) AS nbr_lignes FROM employes WHERE sexe = 'f';
                                        </code>
                                   </strong>
                                    </li>
                              </ul>
                                                                 
                                   </div>
                                   <div class="col-sm-12 mt-5">
                                        <h6 class="text-center"> Isoler une valeur minimum et maximum <em> MIN() / MAX()</em> </h6>
                              <ul>
                                   <li> Grâce à <em> MIN() </em> On peut trouver le salaire minimum :
                                        <strong>
                                             <code>
                                                  SELECT MIN(salaire) FROM employes;
                                        </code>
                                   </strong>
                                    </li>
                                    <li> Grâce à <em> MAX() </em> On peut trouver le salaire maximum :
                                        <strong>
                                             <code>
                                                  SELECT MAX(salaire) FROM employes;
                                        </code>
                                   </strong>
                                    </li>
                              </ul>
                         </div>            
                    </div>
               </div>
                         <div class="row border border-dark p-5">
                              <div class="col-sm-12">
                                   <h2 class="text-center"> 10 - Les regroupement avec <em> GROUPE BY</em> </h2>
                                   <hr>
                                   </div>
                                   <div class="col-sm-12 mt-5">                                       
                             <ul>
                              <li> Ici on veut connaitre le nombre d'employes par service
                                   <strong>
                                        <code>
                                              SELECT service, COUNT(*) AS nbr_Employes FROM employes GROUP BY service;
                                   </code>
                              </strong>
                              </li>
                              <li>Ici on veut connaitre le nombre d'employes homme et nombre d'employes femme 
                                   <strong>
                                        <code>
                                              SELECT sexe, COUNT(*) AS nbr_Employes FROM employes GROUP BY sexe;
                                   </code>
                              </strong>
                              </li>
                             </ul>
                    </div>
               </div>

                    <div class="row border border-dark p-5">
                         <div class="col-sm-12">
                              <h2 class="text-center"> 11 - Le mot clef HAVING </h2>
                              <hr>
                              </div>
                              <div class="col-sm-12 mt-5">                                       
                        <ul>
                         <li> selectionner et afficher seulement les services qui ont plus de deux employes <br>
                              <strong>
                                   <code>
                                         SELECT service, COUNT(*) AS nbr_Employes FROM employes GROUP BY service HAVING COUNT(*) > 2;
                              </code>
                         </strong>
                         </li>
                        
                        </ul>
               </div>
          </div>
               <div class="row border border-dark p-5">
                    <div class="col-sm-12">
                         <h2 class="text-center"> 12 - requête de modification</h2>
                         <hr>
                         </div>
                         <div class="col-sm-12 mt-5">  
                              <h6 class="text-center"> Mise à jour avec UPDATE</h6>                                     
                   <ul>
                    <li> Augmenter le salaire d'un employe : <br>
                         <strong>
                              <code>
                                    UPDATE employes SET salaire = 2700 WHERE id_employe = 380 ;
                         </code>
                    </strong>
                    </li>
                    <li class="alert alert-danger"> 
                         On utilise toujours des id pour mettre à jour les informations de la base de données car c'est le seul élèment unique 
                    </li>
                    <li> Pour faire plusieurs Mise à jours en meme temps, il faudra séparer les données par une virgule :
                         <strong>
                              <code>
                                   UPDATE employes SET service = 'direction', salaire = 4000 WHERE id_employe = 380;
                         </code> 
                    </strong>
                    </li>
                   </ul>
          </div>
     
     
               <div class="col-sm-12">
                    <h6 class="text-center"> supprimer avec DELETE </h6>
                    <ul>
                         <li>
                              Supprimer l'enregistrement d'un employe avec DELETE                                        
               
                    <strong>
                         <code>
                               DELETE FROM employe WHRE id_employe = 910 ;
                    </code>
               </strong>
               </li>
               <li> supprimer plusieurs enregistrements avec le code suivant (on supprime toutes les prenoms du service contrôle)
                    <strong>
                         <code>
                               DELETE FROM employes WHERE service = 'contrôle';
                    </code>
               </strong>
               </li>
              </ul>
     </div>
</div>
     <div class="row border border-dark p-5">
          <div class="col-sm-12">
               <h2 class="text-center"> 13 - requêtes imbriquées </h2>
               <div class="col-sm-12">
                    <h6 class="text-center"> supprimer avec DELETE </h6>
                    <ul>
                         <li> Consiste à exécuter une requête à l'interieur d'une autre requête, encapsulée dans une autre requête, il n'y a pas de limite dans le nombre de niveaux d'imbrication</li>
                    </ul>
                    <li> Le resultat de chaque requête imbriquée de référence dans la codition de sélection de la requête de niveau suppérieur, appellée requête principale </li>
                    <li> Afin d'avoir un cas concret et un contexte favorable à ce type de requête; nous allons modéliser la bdd d'une bibliotheque</li>
               </ul>
               <h4 class="text-center"> 1- Une BDD bibliothéque</h4>
               <p> Les sujets d'une BDD bibliothéque</p>
               <ul>
                    <li> Une table des <strong> livres </strong>  </li>
                    <li> Une table des <strong> abonnés </strong>  </li>
                    <li> Une table des <strong> emprunt </strong> qui permet de savoir quel livre a été emprunté par quel abonné et dans quelle date  </li>
                    
               </ul>
               <p class="alert alert-danger"> Ici, on commence à modéliser notre base de données en réfléchissant à ce qui va aller dedans </p>
               <div class="col-sm-12 row">
                    <div class="col-sm-12 col-md-4"><img class="img-fluid" src="assets/img/abonne.png" alt=""></div>
                    <div class="col-sm-12 col-md-4"> <img class="img-fluid" src="assets/img/livre.png" alt=""></div>
                    <div class="col-sm-12 col-md-4"> <img class="img-fluid" src="assets/img/emprunt.png" alt=""></div>                    
               </div>
          </div>
     </div>
</div>
               <div class="col-sm-12 col-md-4">
                    <ul>
                         <li><h6> Création de la BDD</h6>
                         <strong>
                              <code>
                                   -> CREATE DATABASE IF NOT EXISTS bibliotheque DEFAULT CHARACTER SET = 'utf8mb4'
                              </code>
                         </strong>
                         
                         </li>
                    </ul>
               </div>
               
               <div class="col-sm-12 col-md-4">
                    <ul>
                         <li><h6> Création de la premiere table abonnes</h6>
                         <strong>
                              <code>
                                   -> CREATE TABLE IF NOT EXISTS abonnes (<br> id_abonne INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT, <br> prenom VARCHAR(20) NOT NULL).
                              </code>
                         </strong>
                         
                         </li>
                    </ul>
               </div>

               <div class="col-sm-12 col-md-4">
                    <ul>
                         <li><h6> Création de la DEUXIEME table livres</h6>
                         <strong>
                              <code>
                                   -> CREATE TABLE IF NOT EXISTS livres (<br> id_livre INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT, <br> auteur VARCHAR(30) NOT NULL, <br> titre VARCHAR(30) NOT NULL );
                              </code>
                         </strong>
                         
                         </li>
                    </ul>
               </div>
               <div class="col-sm-12 col-md-4">
                    <ul>
                         <li><h6> Création de la troixieme table emprunts</h6>
                         <strong>
                              <code>
                                   -> CREATE TABLE IF NOT EXISTS emprunts (<br> 
                                   id_emprunt INT(3) NOT NULL PRIMARY KEY AUTO_INCREMENT, <br> 
                                   date_sortie DATE NULL, <br> 
                                   date_rendu DATE NULL, <br> 
                                   id_livre INT(3) NULL, <br>  
                                   id_abonne INT(3) NULL<br> );
                              </code>
                         </strong>
                         
                         </li>
                    </ul>
               </div>
               <div class="col-sm-12 col-md-4">
                    <ul>
                         <li><h6> Création de clefs étrangeres</h6>
                              <ul>
                                   <li> Dans la table emprunt, id_livre sera un champ clé étrangere en référence au champs id_livre de la table livres
                         <strong>
                              <code>
                                   -> ALTER TABLE emprunts ADD FOREIGN KEY (id_livre) REFERENCES bibliotheque.livres(id_livre)
                              </code>
                         </strong>
                    </li>
               </ul>

               <ul>
                    <li> Dans la table emprunt, id_abonne sera un champ clé étrangere en référence au champs id_abonne de la table abonnes
          <strong>
               <code>
                    -> ALTER TABLE emprunts ADD FOREIGN KEY (id_abonne) REFERENCES bibliotheque.abonnes(id_abonne)
               </code>
          </strong>
     </li>
</ul>
<ul>
     <li>Modifier la table emprunt, id_abonne sera un champ clé étrangere en référence au champs id_abonne de la table abonnes
<strong>
<code>
     -> ALTER TABLE nom_de_table ADD nom_nouvelle_colonne VARCHAR(255) AFTER nom_colonne_existante
</code>
</strong>
</li>
</ul>
</div>
<div class="col-sm-12 col-md-4">
     <h6 class="text-center">Insérer des donnés dans le tables <br>/h6>
     <ul>
         <li>
             <strong>
                 <code>
                     INSERT INTO abonnes (prenom) VALUES <br>
                     ('Guillaume'),<br>
                     ('Benoit'),<br>
                     ('Patrick'),<br>
                     ('Jalloul'),<br>
                     ('Jamila')
                 </code>
             </strong>
         </li>
     </ul>
 </div>

 <div class="col-sm-12 col-md-4">
     <h6 class="text-center">Insérer des donnés dans le tables <br></h6>
     <ul>
         <li>
             <strong>
               <code>INSERT INTO livres (id_livre, auteur, titre) VALUES <br>
                    (100, 'GUY DE MAUPASSANT', 'Une vie'), <br>
                    (101, 'GUY DE MAUPASSANT', 'Bel-Ami '), <br>
                    (102, 'HONORE DE BALZAC', 'Le père Goriot'), <br>
                    (103, 'ALPHONSE DAUDET', 'Le Petit chose'), <br>
                    (104, 'ALEXANDRE DUMAS', 'La Reine Margot'), <br>
                    (105, 'ALEXANDRE DUMAS', 'Les Trois Mousquetaires');
                </code>
             </strong>
         </li>
     </ul>
 </div>
 <div class="col-sm-12 col-md-4">
     <ul>
         <li>
          <strong>
             <code>
                    INSERT INTO emprunts (id_emprunt, id_livre, id_abonne, date_sortie, date_rendu) VALUES <br>
                 (NULL, 100, 1, '2014-12-17', '2014-12-18'), <br>
                 (NULL, 101, 2, '2014-12-18', '2014-12-20'), <br>
                 (NULL, 100, 3, '2014-12-19', '2014-12-22'), <br>
                 (NULL, 103, 4, '2014-12-19', '2014-12-22'), <br>
                 (NULL, 104, 1, '2014-12-19', '2014-12-28'), <br>
                 (NULL, 105, 2, '2015-03-20', '2015-03-26'), <br>
                 (NULL, 105, 3, '2015-06-13', NULL), <br>
                 (NULL, 100, 2, '2015-06-15', NULL); <br>
               </code>
          </strong>
         </li>
     </ul>
 </div>
 <div class="col-sm-12 mt-5">
     <H6> Exemple de requêtes</H6>
     <ul>
          <li> On cherche les livres qui n'ont pas été rendu : <br> </li>
         <li>
          <strong>
             <code>
               SELECT id_livre FROM emprunt WHERE date_rendu IS NULL;
               </code>
          </strong>
         </li>
       <li class="alert alert-danger"> Pour trouver un résultat est null on utilise le terme <em>IS</em><code>
          SELECT id_livre FROM emprunt WHERE date_rendu = NULL; </code> Ne touve aucun résultat</li> 
          
          <li> on cherche les titres des livres qui n'ont pas été rendu <br>
               <strong>
                    <code>
                         SELECT titre, id_livre FROM livres WHERE id_livre IN (SELECT id_livre FROM emprunt WHERE date_rendu IS NULL);
                    </code>
               </strong>
          </li>
          <li> On cherche maintenant les id des livres que Patrick a emprunté 
               si je connais l'id de patrick je peux exécuter : <br> </li>
         <li>
          <strong>
             <code>
               SELECT id_livre FROM emprunt WHERE id_abonne = 3 ;
               </code>
          </strong>
         </li>
         <br>
         <li> si je connais pas l'id de Patrick <br></li>
         <li>
          <strong>
             <code>
               SELECT id_livre FROM emprunt WHERE id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom ='Patrick');
               </code>
          </strong>
         </li>
         <br>
         <li> On cherche maintenant les titres des livres que Patrick a emprunté <br></li>                    
    <li>
     <strong>
        <code>
          SELECT titre,id_livre FROM livres WHERE id_livre IN (SELECT id_livre FROM emprunt WHERE id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom = 'Patrick'));
     </code>
     </strong>

    </li>
    <li> On cherche maintenant le prénom des abonnes ayant emprunté un livre le 2014-12-19 <br></li>
    <li>
     <strong>
        <code>
          SELECT prenom, id_abonne FROM abonnes WHERE id_abonne IN (SELECT id_abonne FROM emprunt WHERE date_sortie = '2014-12-19' );          
     </code>
     </strong>
    </li>
    <li> Afficher la liste des abonnnes ayant emprunté un livre de DAUDET <br>

    </li>
    <li>
     <strong>
        <code>
          SELECT prenom, id_abonne FROM abonnes WHERE id_abonne IN (SELECT id_abonne FROM emprunt WHERE id_livre IN ( SELECT id_livre FROM livres WHERE auteur LIKE '%DAUDET%'));  
          
      </code>
     </strong>
    </li>

    <li> Afficher le titre des livres que BENOIT a emprunté à la bibliotheque<br>

    </li>
    <li>
     <strong>
        <code>
         SELECT titre FROM livres WHERE id_livre IN (SELECT id_livre FROM emprunt WHERE id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom = 'Benoit'));
          
      </code>
     </strong>
    </li>
    <li>  Afficher les titres des livres que Benoit n'a pas emprunté <br>

    </li>
    <li>
     <strong>
        <code>
          SELECT id_livre, titre FROM livres WHERE id_livre NOT IN  (SELECT id_livre FROM emprunt WHERE id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom = 'Benoit'));
          
      </code>
     </strong>
    </li>
   

    <li> Afficher les titres des livres que Benoit n'a pas encore rendu à la bibliothèque <br>

    </li>
    <li>
     <strong>
        <code>
          SELECT id_livre, titre FROM livres WHERE id_livre NOT IN (SELECT id_livre FROM emprunt WHERE date_rendu IS NULL AND id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom = 'Benoit' ));
          
      </code>
     </strong>
    </li>

    <li> Combien de livres Guillaume a emprunté à la bibliothèque ? <br>

    </li>
    <li>
     <strong>
        <code>
          
          SELECT COUNT(*) FROM livres WHERE id_livre IN (SELECT id_livre FROM emprunt WHERE date_rendu IS NULL AND id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom = 'Benoit' )); = 'Guillaume';
          
      </code>
      <br>
      <code>
          SELECT COUNT(id_livre) AS nombreEempruntGuillaume FROM emprunt WHERE id_abonne IN (SELECT id_abonne FROM abonnes WHERE prenom = 'Guillaume')
      </code>
     </strong>
    </li>

    <li> Quel est le livre qui n'a été emprunté par personne <br>

    </li>
    <li>
     <strong>
        <code>
          SELECT titre FROM livres WHERE id_livre NOT IN (SELECT id_livre FROM emprunt);
          
      </code>
     </strong>
    </li>

    <li> Combien de personnes ont emprunté le livre Une vie ? <br>

    </li>
    <li>
     <strong>
        <code>
          
         
          SELECT COUNT(prenom) FROM abonnes WHERE id_abonne IN(SELECT id_abonne FROM emprunt WHERE id_livre IN (SELECT id_livre FROM livres WHERE titre = 'une vie' ));

      </code>
      <br>
      ou
      <br>
      <code>
          SELECT COUNT(*) FROM emprunt WHERE id_livre IN (SELECT id_livre FROM livres WHERE titre ='une vie' );
      </code>
     </strong>
    </li>

    <li> Quel livre a été emprunté le dernier ? <br>

    </li>
    <li>
     <strong>
        <code>
          
          SELECT titre FROM livres WHERE id_livre IN (SELECT id_livre FROM emprunt ORDER BY date_sortie DESC) LIMIT 1
     
      </code>
     </strong>
    </li>
        
     </ul>
 </div>

  </div>
               
</div>
</div>

       

</div>

</main>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
crossorigin="anonymous"></script>

</body>

</html>